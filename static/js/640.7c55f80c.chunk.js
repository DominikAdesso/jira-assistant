"use strict";(globalThis.webpackChunkjira_assistant=globalThis.webpackChunkjira_assistant||[]).push([[640],{1857:(e,t,s)=>{s.d(t,{Z:()=>k});var o=s(7313),n=s(6123),l=s.n(n),r=s(816),i=s(1485),a=s(1329),u=s(6417);const d=(0,u.jsx)("div",{className:"empty-group-msg",children:"Drag and drop column here to group data"}),c=(0,u.jsx)("span",{children:"Drag and drop more columns here"});class p extends o.PureComponent{constructor(){super(...arguments),this.toggleSort=(e,t)=>{const{groupBy:s,foldable:o,onChange:n}=this.props,l=[...s];l[e]={...l[e],sortDesc:t},n(l,o,"sort")},this.changeSettings=(e,t)=>{const{groupBy:s,foldable:o,onChange:n}=this.props,l=[...s];l[e]={...l[e],settings:t},n(l,o,"settings")},this.removeGroup=e=>{const{groupBy:t,foldable:s,onChange:o}=this.props,n=[...t];n.splice(e,1),o(n,s,"remove")},this.toggleMode=e=>{const{groupBy:t,foldable:s,onChange:o}=this.props;!!s!==e&&o(t,e,"mode")},this.columnReordered=e=>{const{foldable:t,onChange:s}=this.props;s(e,t,"rearrange")}}render(){const{groupBy:e,foldable:t,toggleColumns:s,showColumns:o,allColumns:n,displayColumns:l}=this.props;let r=null;return l&&l.length<(null===n||void 0===n?void 0:n.length)?r=`${l.length} (${n.length})`:null!==n&&void 0!==n&&n.length&&(r=null===n||void 0===n?void 0:n.length),(0,u.jsxs)("div",{className:"group-bar",children:[(0,u.jsx)("span",{className:"fa group-mode-icon fa-columns"+(o?" active":""),onClick:s,title:"Click to choose what column to display",children:r&&(0,u.jsx)("span",{className:"badge badge-warning visible-cols",children:r})}),e.length>0&&(0,u.jsx)("span",{className:"fa group-mode-icon fa-th-list"+(t?"":" active"),onClick:()=>this.toggleMode(!1),title:"Display group values in columns"}),e.length>0&&(0,u.jsx)("span",{className:"fa group-mode-icon fa-indent"+(t?" active":""),onClick:()=>this.toggleMode(!0),title:"Display group values in foldable row"}),(0,u.jsx)("span",{className:"group-label",children:"Group by:"}),(0,u.jsx)("div",{className:"group-list-container",children:(0,u.jsx)(i.bt,{className:"group-list",items:e,itemType:"column",onChange:this.columnReordered,accepts:["column"],placeholder:e.length?c:d,children:(e,t,s)=>(0,u.jsx)(g,{group:e,index:t,toggleSort:this.toggleSort,removeGroup:this.removeGroup,settingsChanged:this.changeSettings,dropProps:s},t)})})]})}}const h=p;class g extends o.PureComponent{constructor(){super(...arguments),this.removeGroup=()=>this.props.removeGroup(this.props.index),this.sortAsc=()=>this.props.toggleSort(this.props.index,!1),this.sortDesc=()=>this.props.toggleSort(this.props.index,!0),this.setRef=e=>{this.el=e;const{dropProps:{dropConnector:t}={}}=this.props;t&&t(e)},this.changeSettings=e=>{let{prop:t,type:s,value:o,default:n,aggregate:l}=e;const{settingsChanged:r,group:i,index:a}=this.props;let{settings:u}=i;if(u=u?{...u}:{},"check"===s){const e=void 0===u[t]?n:u[t];u[t]=!e}else u[t]=o;r(a,u)},this.showMenu=e=>{const{group:{groupOptions:t,settings:s}}=this.props,o=t.map((e=>{if(e.separator)return{separator:!0};const{label:t,type:o,prop:n,value:l="check"===o,default:r}=e,i=null===s||void 0===s?void 0:s[n];return{label:t,icon:`${"fa fa-"+(i===l||void 0===i&&r?"check-":"")}${"check"===o?"square":"circle"}`,command:()=>this.changeSettings(e)}}));(0,i.pT)(e,o)}}render(){var e,t;const{group:s}=this.props;return(0,u.jsxs)("div",{ref:this.setRef,className:"group-list-item",onContextMenu:null!==(e=s.groupOptions)&&void 0!==e&&e.length?this.showMenu:void 0,children:[!s.sortDesc&&(0,u.jsx)("span",{className:"fa fa-sort-amount-asc sort-icon",onClick:this.sortDesc,title:"Click to sort desc"}),!!s.sortDesc&&(0,u.jsx)("span",{className:"fa fa-sort-amount-desc sort-icon",onClick:this.sortAsc,title:"Click to sort asc"}),s.displayText,!(null===(t=s.groupOptions)||void 0===t||!t.length)&&(0,u.jsx)("span",{className:"fa fa-wrench margin-l-5 pointer",onClick:this.showMenu,title:"Click to change settings"}),(0,u.jsx)("span",{className:"fa fa-times",onClick:this.removeGroup})]})}}var m=s(9165);class v extends o.PureComponent{constructor(e){super(e),this.hideColumns=()=>{let{columns:e}=this.state,t=e.filter((e=>e.selected));t=t.length===e.length?null:t.map((e=>e.id)),e=null,this.props.onChange(t)},this.selectionChanged=(e,t)=>{let{columns:s}=this.state;s=[...s],s[e]={...s[e],selected:t},this.setState({columns:s})},this.state=this.getState(e)}getState(e){const{displayColumns:t}=e;return{columns:this.props.columns.map((e=>{let{id:s,displayText:o}=e;return{id:s,displayText:o,selected:!t||!!~t.indexOf(s)}}))}}render(){const{columns:e}=this.state;return(0,u.jsx)("div",{className:"columns-list-container",children:(0,u.jsxs)("div",{className:"columns-list",children:[(0,u.jsxs)("div",{className:"column-list-title",children:[(0,u.jsx)("span",{className:"fa fa-times",onClick:this.hideColumns}),(0,u.jsx)("span",{children:"Choose Columns"})]}),(0,u.jsx)("div",{className:"columns-list-items",children:e.map(((e,t)=>(0,u.jsx)("div",{className:"column-list-item",children:(0,u.jsx)(m.XZ,{label:e.displayText,checked:e.selected,onChange:e=>this.selectionChanged(t,e)})},t)))})]})})}}const x=v;var y=s(4711),f=s(4616);const C=["column"];class j extends o.PureComponent{constructor(e){super(e),this.getGroupColumnRenderer=e=>(t,s)=>(0,u.jsx)("th",{rowSpan:e?2:void 0,className:"group-header foldable"},s),this.renderTableBody=(e,t)=>t&&t.length?this.getGroupRenderer(e,t):this.getRowRenderer(e),this.getCellRenderer=e=>(t,s)=>{if(!t.visible)return null;const{field:o,hasPath:n,format:l,type:r,viewComponent:i,props:a}=t;let d=n?(0,y.aM)(e,o):e[o];return l&&"function"===typeof l&&(d=l(d,e,o)),i?(0,u.jsx)(i,{value:d,...a},s):(0,u.jsx)("td",{exportType:r,children:d},s)},this.toggleGroupVisibility=e=>{},this.sortColumnChanged=(e,t)=>{const{groupBy:s,state:{groupFoldable:o,data:n},props:{displayColumns:l}}=this,r={groupFoldable:o},i=null===s||void 0===s?void 0:s.length;return i&&(r.data=this.sortGroupedData(n,s,e,t)),this.setState(r),this.props.onChange({groupBy:s,groupFoldable:o,displayColumns:l,sortField:e,isDesc:t}),i?r.data:void 0},this.onGroupChanged=(e,t,s)=>{const{data:o}=this.state,n={data:o,groupFoldable:t},{displayColumns:l,sortField:r,isDesc:i,groupBy:a}=this.props;"sort"===s&&(n.data=this.sortGroupedData(o,e,r,i)),e="mode"!==s?e.map((e=>{let{id:t,field:s,fieldKey:o,sortDesc:n,settings:l}=e;return{id:t,field:s,fieldKey:o,sortDesc:n,settings:l}})):a,this.setState(n),this.props.onChange({groupBy:e,displayColumns:l,groupFoldable:t,sortField:r,isDesc:i})},this.toggleColumns=()=>{this.setState({showColumns:!this.state.showColumns})},this.columnSelectionChanged=e=>{const{groupBy:t,groupFoldable:s,sortField:o,isDesc:n}=this.props;this.setState({showColumns:null},(()=>this.props.onChange({groupBy:t,displayColumns:e,groupFoldable:s,sortField:o,isDesc:n})))},(0,f.f3)(this,"UtilsService"),this.convertDate=this.$utils.convertDate,this.state=this.getNewState(e)}UNSAFE_componentWillReceiveProps(e){this.setState(this.getNewState(e))}getNewState(e){const{groupBy:t,columns:s,displayColumns:o,dataset:n,groupFoldable:l,sortField:r,isDesc:i}=e,a={...this.state,groupFoldable:l};this.columns===s&&o===this.displayColumns||(a.allColumns=this.getColumnSchema(e),a.columns=a.allColumns,this.columns=s,this.displayColumns=o);const u=this.groupBy!==t;if(u)if(a.groupBy=this.getGroupedColumnSchema(t,a.allColumns),this.groupBy=t,t&&t.length){const e=t.map((e=>"string"===typeof e?e:e.id||e.field));a.columns=a.allColumns.filter((t=>t.visible&&!~e.indexOf(t.id)))}else a.columns=a.allColumns.filter((e=>e.visible));return(u||this.isDesc!==i||this.sortField!==r||this.dataset!==n)&&(a.data=this.prepareDataForRendering(n,a.groupBy,r,i),this.dataset=n,this.sortField=r,this.isDesc=i),a}getGroupedColumnSchema(e,t){let s=null;return Array.isArray(e)&&e.length&&(t=t.reduce(((e,t)=>(e[t.id]=t,e)),{}),s=e.map((e=>{let s,o=e,n=e,l=o,r=!1;if("object"===typeof e&&(o=e.field,n=e.id||o,l=e.fieldKey||e.groupKey||o,r=e.sortDesc,s=e.settings),!(e=t[n]))return null;const{displayText:i,allowSorting:a,groupOptions:u,type:d,viewComponent:c}=e;return{id:n,field:o,viewComponent:c,fieldKey:l,displayText:i,allowSorting:a,groupOptions:u,sortDesc:r,visible:!0,settings:s,type:d}})).filter(Boolean),s.length||(s=null)),s}getColumnSchema(e){const{columns:t,allowSorting:s=!0,allowGrouping:o=!0}=e;let{displayColumns:n}=e;Array.isArray(n)||(n=null);const l=!!n&&n.some((e=>e.startsWith("-")));return t.map((e=>{const{field:t,fieldKey:r=t,allowSorting:i=s,groupText:a,allowGrouping:u=o,groupOptions:d,format:c,type:p,viewComponent:h,props:g,sortValueFun:m,groupValueFunc:v}=e,x=e.id||t;return{id:x,field:e.field,fieldKey:r,hasPath:(null===t||void 0===t?void 0:t.indexOf("."))>0,displayText:e.displayText||t,visible:!n||(l?!n.includes(`-${x}`):n.includes(x)),allowSorting:i,groupText:a,allowGrouping:u,groupOptions:d,format:c,type:p,viewComponent:h,props:g,sortValueFun:m,groupValueFunc:v}}))}prepareDataForRendering(e,t,s,o){return t&&t.length&&Array.isArray(e)&&e.length?this.groupData(e,t,s,o):s?e.sortBy(s,o):e}groupData(e,t,s,o,n){var l;if(n=n?`${n}_`:"",!t.length)return s?e.sortBy(s,o):e;const{0:{field:i,fieldKey:a,sortDesc:u,settings:d,type:c}}=t;t=t.slice(1);const p=a&&a!==i,h=function(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.groupBy(t,null,p?i:s)};let g=null===d||void 0===d?void 0:d.funcType;const m=this.convertDate;let v=null;if("date"===c||"datetime"===c){g=g||"yyyy-MM (MMMM)";let e=e=>{const t=m(e[i]);return t?t.format(g):t};"friendly"===g&&(e=e=>{const t=e[i];return t?r(t).fromNow():t}),v=h(e,((e,t)=>({text:t||"(no date)"})))}else if(!g||"number"!==c&&"seconds"!==c){switch(null===d||void 0===d?void 0:d.valueType){case"count":v=[{key:e.length,values:e}];break;case"distinct":v=[{key:null===(l=e.distinct(a||i))||void 0===l?void 0:l.length,values:e}];break;default:v=h(a||i)}}else switch(g){default:v=h(a||i);break;case"sum":v=[{key:e.sum(i),values:e}];break;case"avg":v=[{key:e.avg(i),values:e}];break;case"count":const t=e.count((e=>e[i]>0));v=[{key:t,keyObj:{text:`${t} has value`},values:e}]}return v.sortBy("key",u).map(((e,l)=>({key:e.key,keyObj:e.keyObj,path:n+l,rowSpan:e.values.length,values:this.groupData(e.values,t,s,o,n+l)})))}getColumnGrouping(e){const t=e.groupBy("groupText",(e=>e.visible)).filter((e=>{let{key:t}=e;return!!t}));return t.length?t:void 0}getColGroupingLen(e){if(e)return e.reduce(((e,t)=>(e[t.key]=t.values.length,e)),{})}getGroupedRow(e){return e?(0,u.jsx)(a.lE,{children:e.map((e=>e.values.map(this.getColumnRenderer(!1))))}):null}getColumnRenderer(e,t){return(s,o)=>{if(!s.visible)return null;let n,l=!e&&s.allowSorting?s.fieldKey||s.field:void 0,r=s.allowGrouping,d=t?2:void 0,c=s.displayText;if(t&&s.groupText){if(c=s.groupText,n=t[c],!n)return null;delete t[c],d=void 0,l=void 0,r=!1}return!1===r?(0,u.jsx)(a.sg,{sortBy:l,rowSpan:d,colSpan:n,children:c},o):(0,u.jsx)(i._l,{itemType:"column",item:s,itemTarget:C,children:(e,t)=>(0,u.jsx)(a.sg,{rowSpan:d,colSpan:n,dragConnector:e,sortBy:l,children:c})},o)}}getRowRenderer(e){return(t,s)=>(0,u.jsx)("tr",{children:this.renderRowCells(e,t)},s)}renderRowCells(e,t){return e.map(this.getCellRenderer(t))}getGroupRenderer(e,t){const{groupFoldable:s}=this.state;return s?(s,o)=>this.renderFoldableGroupRow(s,o,e,t):(s,o)=>this.renderGroupRow(s,o,e,t)}renderFoldableGroupRow(e,t,s,n){var l;let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;const i=n[0],a="value"!==((null===i||void 0===i||null===(l=i.settings)||void 0===l?void 0:l.valueType)||"value")?null:null===i||void 0===i?void 0:i.viewComponent,d=r>0&&[].init(((e,t)=>(0,u.jsx)("td",{className:"group-indent-td"},t)),r),c=n.length>0&&(0,u.jsxs)("tr",{children:[d,(0,u.jsx)("td",{className:"group-toggler-td",title:`Click to ${e.hidden?"expand":"collapse"} group`,"group-path":e.path,onClick:this.toggleGroupVisibility,children:(0,u.jsx)("span",{className:"fa fa-caret-"+(e.hidden?"right":"down")})}),(0,u.jsx)("td",{className:"group-name-td",colSpan:n.length+s.length,children:a?(0,u.jsx)(a,{tag:"span",count:e.rowSpan,value:e.keyObj||e.key,settings:i.settings}):e.key||""})]},e.key);let p=null;return n.length>0?p=e.values.map(((e,t)=>this.renderFoldableGroupRow(e,t,s,n.slice(1),r+1))):(p=s.map(this.getCellRenderer(e)),p=(0,u.jsxs)("tr",{children:[d,p]},t)),(0,u.jsxs)(o.Fragment,{children:[c,p]},t)}renderGroupRow(e,t,s,n){var l;let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;const i=n[0],a="value"!==((null===i||void 0===i||null===(l=i.settings)||void 0===l?void 0:l.valueType)||"value")?null:null===i||void 0===i?void 0:i.viewComponent;let d=n.length>0&&(0,u.jsx)("td",{rowSpan:e.rowSpan,children:a?(0,u.jsx)(a,{tag:"span",count:e.rowSpan,settings:null===i||void 0===i?void 0:i.settings,value:e.keyObj||e.key}):e.key||""});r&&d?d=(0,u.jsxs)(o.Fragment,{children:[r,d]}):r&&0===t&&(d=r);let c=null;return n.length>0?c=e.values.map(((e,t)=>this.renderGroupRow(e,t,s,n.slice(1),0===t&&d))):(c=s.map(this.getCellRenderer(e)),c=(0,u.jsxs)("tr",{children:[d,c]},t)),c}sortGroupedData(e,t,s,o,n){if(n=n?`${n}_`:"",0===t.length)return s?e.sortBy(s,o):e;const{sortDesc:l}=t[0];return t=t.slice(1),e.sortBy("key",l).map(((e,l)=>({...e,path:n+l,values:this.sortGroupedData(e.values,t,s,o,n+l)})))}render(){const{exportSheetName:e,noRowsMessage:t,sortField:s,isDesc:o,displayColumns:n,className:r,hideGroups:i}=this.props,{allColumns:d,columns:c,groupBy:p,groupFoldable:g,data:m,showColumns:v}=this.state,y=this.getColumnGrouping(c),f=this.getColGroupingLen(y);return(0,u.jsxs)("div",{className:l()("groupable-grid",i&&"groups-hidden"),children:[v&&(0,u.jsx)(x,{onChange:this.columnSelectionChanged,columns:d,displayColumns:n}),!i&&(0,u.jsx)(h,{groupBy:p||[],displayColumns:n,allColumns:d,foldable:g,showColumns:v,onChange:this.onGroupChanged,toggleColumns:this.toggleColumns}),(0,u.jsxs)(a.TT,{className:r,dataset:m,exportSheetName:e,sortBy:s,isDesc:o,onSort:this.sortColumnChanged,children:[(0,u.jsxs)(a.Et,{children:[(0,u.jsxs)(a.lE,{children:[!!g&&p&&p.map(this.getGroupColumnRenderer(f)),!g&&p&&p.map(this.getColumnRenderer(!0,f)),c.map(this.getColumnRenderer(!1,f))]}),this.getGroupedRow(y)]}),(0,u.jsx)(a.XP,{children:this.renderTableBody(c,p)}),(0,u.jsx)(a.ch,{span:c.length,children:t})]})]})}}const k=j},2251:(e,t,s)=>{s.d(t,{Sn:()=>i,qm:()=>u,lc:()=>p,m4:()=>h,y5:()=>g,Y3:()=>m,Bx:()=>v,_t:()=>f,a3:()=>b,Hv:()=>w,aS:()=>S,s$:()=>T,H:()=>N});var o=s(7313),n=s(6417);class l extends o.PureComponent{render(){const{tag:e="td",className:t,settings:s,count:o}=this.props,l=!!o&&!(null===s||void 0===s||!s.showGroupCount)&&(0,n.jsxs)("span",{className:"badge badge-info margin-l-5",title:`Total issues in group: ${o}`,children:["(",o,")"]});return(0,n.jsx)(e,{className:t,children:this.renderControl(l)})}}const r=l;const i=class extends r{renderControl(){const{value:e}=this.props;return null!==e&&void 0!==e&&e.length?`${e.length} comments`:null}};var a=s(5991);const u=class extends r{constructor(e){super(e),(0,a.f3)(this,"UserUtilsService")}renderControl(e){const{value:t,date:s=t,quick:o}=this.props;return s?null!==t&&void 0!==t&&t.text?(0,n.jsxs)(n.Fragment,{children:[t.text," ",e]}):(0,n.jsxs)("span",{title:o?this.$userutils.formatDateTime(s):null,children:[o&&"about "," ",this.$userutils.formatDateTime(s,o?"quick":null)]}):e}};var d=s(4616),c=s(9165);const p=class extends r{constructor(e){super(),e.getTicketUrl?this.getTicketUrl=e.getTicketUrl:((0,d.f3)(this,"UserUtilsService"),this.getTicketUrl=this.$userutils.getTicketUrl)}renderControl(e){var t;const{value:s,issue:o=s,title:l,className:r,settings:i}=this.props;if(!o)return e;if("string"===typeof o)return o;const a=o.key,u=o.fields,d=null===u||void 0===u?void 0:u.issuetype,p=null===u||void 0===u?void 0:u.summary,h=null===d||void 0===d?void 0:d.iconUrl,g=null===d||void 0===d?void 0:d.name;let m=null===u||void 0===u||null===(t=u.status)||void 0===t?void 0:t.name;m=!!m&&!1!==(null===i||void 0===i?void 0:i.showStatus)&&`(${m})`;const v=null===i||void 0===i?void 0:i.valueType;let x=a||"Unknown";return"summary"===v?x=p:"both"===v&&(x=(0,n.jsxs)(n.Fragment,{children:[x," - ",p]})),(0,n.jsxs)("a",{href:this.getTicketUrl(a),title:l,rel:"noopener noreferrer",className:`link ${r}`,target:"_blank",children:[!!h&&(0,n.jsx)(c.Ee,{src:h,title:g}),(0,n.jsxs)("span",{title:p,children:[x," ",m]}),e]})}};const h=class extends r{constructor(){super(),(0,d.f3)(this,"UserUtilsService")}renderControl(){const{value:e}=this.props;if(null===e||void 0===e||!e.length)return null;const t=this.$userutils.getTicketUrl;return(0,n.jsx)("ul",{className:"tags",children:e.map(((e,s)=>{const o=e.type,l=o&&(e.inwardIssue?o.inward:o.outward);return(0,n.jsx)("li",{children:(0,n.jsx)(p,{tag:"span",issue:o?e.inwardIssue||e.outwardIssue:e,title:l,getTicketUrl:t,className:"badge badge-pill skin-bg-font"})},s)}))})}};const g=class extends r{renderControl(e){const{value:t,textField:s="name",iconField:o="iconUrl"}=this.props;return t?(0,n.jsxs)(n.Fragment,{children:[!!o&&(0,n.jsx)(c.Ee,{src:t[o]}),t[s]," ",e]}):e}};const m=class extends r{renderControl(){const{value:e,progress:t=e}=this.props;return null!==t&&void 0!==t&&t.percent?`${t.percent}%`:null}};const v=class extends r{renderControl(e){var t;const{value:s,project:o=s,settings:l}=this.props;if(!o)return e;if("string"===typeof o)return o;const r=null===(t=o.avatarUrls)||void 0===t?void 0:t["16x16"],i=null===l||void 0===l?void 0:l.valueType;let a=o.key;return"name"===i?a=o.name:"both"===i&&(a=(0,n.jsxs)(n.Fragment,{children:[o.name," (",o.key,")"]})),(0,n.jsxs)(n.Fragment,{children:[!!r&&(0,n.jsx)(c.Ee,{src:r}),a,e]})}};var x=s(4711);const y=/^com\..*\[.*\].*$/;const f=class extends r{getRepeator(e){const{tagProp:t="name",titleProp:s,iconClass:o,hrefProp:l,hideZero:r}=this.props,i=!!o&&(0,n.jsx)("span",{className:`fa ${o}`});return l?(o,a)=>{const u="string"===typeof o?o:o[t];if(0===u&&r)return null;const d=(0,n.jsxs)("a",{href:o[l]||void 0,title:s?o[s]:void 0,rel:"noopener noreferrer",target:"_blank",className:"link badge badge-pill skin-bg-font",children:[i," ",u]});return e?d:(0,n.jsx)("li",{children:d},a)}:(o,l)=>{let a=o;if("string"===typeof o)y.test(o)&&(a=(o=(0,x.Kk)(o))[t||"name"]||a);else if(a=o[t],0===a&&r)return null;const u=(0,n.jsxs)("span",{title:s?o[s]:void 0,className:"badge badge-pill skin-bg-font",children:[i," ",a]});return e?u:(0,n.jsx)("li",{children:u},l)}}renderControl(){const{value:e}=this.props;return e?Array.isArray(e)?(0,n.jsx)("ul",{className:"tags",children:e.map(this.getRepeator())}):"object"===typeof e?this.getRepeator(!0)(e,0):void 0:null}};var C=s(1485),j=s(4074);class k extends r{constructor(e){super(e),this.startTimer=()=>this.context.startTimer(this.props.value),this.showContext=e=>{const t=[...this.contextMenu];try{const e=this.context.getElapsedTimeInSecs(),s=(null===e||void 0===e?void 0:e.key)===this.props.value,o=null===e||void 0===e?void 0:e.isRunning;s?(o?t.push({label:"Pause timer",icon:"fa fa-pause",command:this.context.pauseTimer}):t.push({label:"Resume timer",icon:"fa fa-play",command:this.context.resumeTimer}),t.push({label:"Stop timer",icon:"fa fa-stop",command:this.context.stopTimer})):t.push({label:"Start timer",icon:"fa fa-play",command:this.startTimer})}catch{}(0,C.pT)(e,t)},(0,d.f3)(this,"UserUtilsService","BookmarkService"),this.contextMenu=[!e.hideWorklog&&{label:"Add worklog",icon:"fa fa-clock-o",command:()=>this.props.onAddWorklog(this.props.value)},{label:"Bookmark",icon:"fa fa-bookmark",command:()=>this.addBookmark()}].filter(Boolean)}renderControl(e){const{value:t,url:s=this.$userutils.getTicketUrl(t),hideContext:o}=this.props;return t?(0,n.jsxs)(n.Fragment,{children:[!o&&(0,n.jsx)("i",{className:"fa fa-ellipsis-v margin-r-8",onClick:this.showContext}),(0,n.jsx)("a",{href:s,className:"link strike",target:"_blank",rel:"noopener noreferrer",children:t}),e]}):e}addBookmark(){const{value:e,onBookmark:t}=this.props;this.$bookmark.addBookmark([e],!t).then(t)}}k.contextType=j.a2;const b=k;const w=class extends r{constructor(e){super(e),(0,d.f3)(this,"UtilsService")}renderControl(e){var t;const{value:s,inputType:o="secs",days:l,converter:r}=this.props;let{timespent:i=s}=this.props;return r&&(i=r(i)),i?("ticks"===o&&i>500&&(i=parseInt(i/1e3)),i=null!==(t=i)&&void 0!==t&&t.text?i.text:this.$utils.formatSecs(i,void 0,void 0,l),(0,n.jsxs)("span",{children:[i," ",e]})):e}};const S=class extends r{renderControl(){const{value:e}=this.props;if(!e)return null;const{remainingEstimate:t,timeSpent:s}=e;return s||t?(0,n.jsxs)("span",{children:[s," (",t," remaining)"]}):null}};const T=class extends r{renderControl(e){var t;let{value:s}=this.props;return s?(s=(null===(t=s)||void 0===t?void 0:t.text)||s,"object"!==typeof s?(0,n.jsxs)(n.Fragment,{children:[s," ",e]}):Array.isArray(s)?s.length?this.getTagRenderer(s[0],s):null:this.getTagRenderer(s,s)):e}getTagRenderer(e,t){return e.value?(0,n.jsx)(f,{value:t,tagProp:"value",tag:"span"}):e.name?(0,n.jsx)(f,{value:t,tagProp:"name",tag:"span"}):JSON.stringify(e)}};const N=class extends r{renderControl(e){var t,s;const{value:o,user:l=o,settings:r}=this.props;if(!l)return e;if("string"===typeof l)return l;const i=!(null===r||void 0===r||!r.showImage)&&((null===(t=l.avatarUrls)||void 0===t?void 0:t["32x32"])||(null===(s=l.avatarUrls)||void 0===s?void 0:s["48x48"])),a=null===r||void 0===r?void 0:r.valueType;let u=l.displayName;return"email"===a?u=l.emailAddress:"both"===a&&(u=(0,n.jsxs)(n.Fragment,{children:[l.displayName," (",l.emailAddress,")"]})),(0,n.jsxs)(n.Fragment,{children:[!!i&&(0,n.jsx)(c.Ee,{className:"img-x32",src:i}),u,e]})}}},218:(e,t,s)=>{s.d(t,{Z:()=>i});var o=s(7313),n=s(2544),l=s(6417);class r extends o.PureComponent{constructor(){super(...arguments),this.onChange=e=>{this.props.onChange(null===e||void 0===e?void 0:e.trim(),null)}}render(){const{jql:e}=this.props;return(0,l.jsx)("div",{className:"jql-editor",children:(0,l.jsx)(n.Z,{className:"jql-query",multiline:!0,placeholder:"JQL query to fetch data",value:e,onChange:this.onChange})})}}const i=r}}]);