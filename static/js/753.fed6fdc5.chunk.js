"use strict";(globalThis.webpackChunkjira_assistant=globalThis.webpackChunkjira_assistant||[]).push([[753],{9168:(e,t,s)=>{s.d(t,{Z:()=>l});var a=s(7313),n=s(3499),o=s(6417);const i={danger:"p-button-danger",success:"p-button-success",secondary:"p-button-secondary",warning:"p-button-warning",info:"p-button-info",primary:"",default:""};class r extends a.PureComponent{constructor(){super(...arguments),this.state={}}componentDidMount(){const{waitFor:e=0}=this.props;if(e>0){this.setState({waitFor:e});const t=setInterval((()=>{const{waitFor:e}=this.state;this.setState({waitFor:e-1}),e<=1&&clearInterval(t)}),1e3)}}render(){const{type:e,rounded:t,isLoading:s,icon:a,onClick:r,title:l,style:c}=this.props;let{className:h,disabled:d,label:u}=this.props;const{waitFor:p}=this.state;p>0&&(d=!0,u+=` (${p})`);let m=`rb-button ${i[e]||""}`;t&&(m+=" p-button-rounded "),u||(m+=" ui-button-icon-only "),h=h||"";const g={label:u,icon:a,onClick:r,disabled:d,title:l,style:c,className:`${m} ${h}`};return s&&(g.icon="fa fa-spinner fa-spin"),(0,o.jsx)(n.Button,{...g})}}const l=r},7656:(e,t,s)=>{s.d(t,{ZP:()=>v,dq:()=>g});var a=s(7313),n=s(3651),o=(s(4153),s(2544)),i=s(816),r=s.n(i),l=s(9168),c=s(6088),h=s(6123),d=s.n(h),u=s(6417);const p=["This month","Last one month","Last month","This week","Last one week","Last week"];function m(){return{"This month":[r()().startOf("month").toDate(),r()().endOf("month").toDate()],"Last one month":[r()().subtract(1,"months").toDate(),r()().toDate()],"Last month":[r()().subtract(1,"months").startOf("month").toDate(),r()().subtract(1,"months").endOf("month").toDate()],"This week":[r()().startOf("week").toDate(),r()().endOf("week").toDate()],"Last one week":[r()().subtract(6,"days").toDate(),r()().toDate()],"Last week":[r()().subtract(1,"weeks").startOf("week").toDate(),r()().subtract(1,"weeks").endOf("week").toDate()]}}function g(e,t){if(0===e||e>0){const s=m(),a=p[e],n=a&&s[a]||[];return t?n.map((e=>r()(e))):n}}class f extends a.PureComponent{constructor(e){super(e),this.onChange=(e,t)=>{var s,a;this.manuallyEdited=!1;const{range:n}=this.props;let o=t.startDate,i=null===(s=o)||void 0===s?void 0:s.toDate(),r="";if(n){const{chosenLabel:e,startDate:s,endDate:a}=t;if(s&&a){i={fromDate:s.toDate(),toDate:a.toDate()};const t=p.indexOf(e);t>=0&&(i.quickDate=t),r=`${s.format(this.displayFormat)} - ${a.format(this.displayFormat)}`,o=[i.fromDate,i.toDate]}}else null!==(a=o)&&void 0!==a&&a.isValid()&&(r=o.format(this.displayFormat));this.setState({value:o,displayDate:r}),this.props.onChange(i)},this.setDate=e=>{if(this.manuallyEdited){let{target:{value:t}}=e;if(t=t.trim(),!t&&!0===this.props.allowClear)return void this.onChange(null,{startDate:null});let s=r()(t,this.displayFormat);s.isValid()||(s=r()(t)),s.isValid()&&s.format(this.displayFormat)===t||(s=this.state.value),this.picker.setStartDate(s),this.picker.setEndDate(s),this.onChange(null,{startDate:s})}else null!==e&&void 0!==e&&e.currentTarget&&this.props.onBlur&&this.props.onBlur(e)},this.onKeyDown=e=>{const{keyCode:t}=e;13===t?this.setDate(e):this.props.onKeyDown&&(27===t&&(this.setDateFromProps(this.props),this.manuallyEdited=!1),this.props.onKeyDown(e))},this.dateEdited=e=>{this.manuallyEdited=!0},this.setPicker=e=>this.picker=e;const{value:t,range:s,showTime:a}=e;(0,c.f3)(this,"SessionService");let n=this.$session.CurrentUser.timeFormat||" hh:mm tt";this.timePicker24Hour=-1===n.indexOf("tt"),n=n.replace("tt","A").replace(".ss","").replace(":ss",""),this.dateRange=m(),this.displayFormat=e.dateFormat||`DD-MMM-YYYY${a?n:""}`,this.state=this.getDateValue(t,s)}UNSAFE_componentWillReceiveProps(e){this.setDateFromProps(e)}setDateFromProps(e){const{value:t,range:s}=e;this.setState(this.getDateValue(t,s))}getDateValue(e,t){const s={displayDate:""};return e?t?"object"===typeof e&&(e=e.quickDate>=0?g(e.quickDate,!0):"object"===typeof e&&e.fromDate?[r()(e.fromDate),r()(e.toDate)||null]:[],s.value=e,e[0]&&e[1]&&(s.displayDate=`${e[0].format(this.displayFormat)} - ${e[1].format(this.displayFormat)}`)):(s.value=r()(e),s.displayDate=s.value.format(this.displayFormat)):t&&(s.value=[]),s}render(){const{onChange:e,props:{multiselect:t,range:s,disabled:a,style:i,className:r,autoFocus:c},state:{displayDate:h}}=this;let{placeholder:p}=this.props;return!0===t?p=p||"Select one or more date":!0===s&&(p=p||"Select a date range"),p=p||"Select a date",(0,u.jsx)("div",{className:d()("react-bootstrap-daterangepicker-container",r),children:(0,u.jsx)(n.Z,{ref:this.setPicker,style:i,className:r,disabled:a,initialSettings:this.getPickerSettings(),onApply:e,children:(0,u.jsxs)("span",{children:[(0,u.jsx)(o.Z,{className:"date-range-ctl",value:h,readOnly:s,placeholder:p,autoFocus:c,onChange:s?void 0:this.dateEdited,onBlur:s?void 0:this.setDate,onKeyDown:this.onKeyDown}),(0,u.jsx)(l.Z,{icon:"fa fa-calendar",className:"icon"})]})})})}getPickerSettings(){const{dateRange:e,props:{showTime:t,range:s},state:{value:a}}=this,n={showDropdowns:!0,timePicker:t||!1,alwaysShowCalendars:!1,maxSpan:6,autoApply:!0,linkedCalendars:!1,autoUpdateInput:!1};let o=null;return o=s?{...n,startDate:a[0],endDate:a[1],ranges:e,singleDatePicker:!1,showCustomRangeLabel:!0}:{...n,singleDatePicker:!0,startDate:a,endDate:a,timePicker24Hour:this.timePicker24Hour},o}}const v=f},1270:(e,t,s)=>{s.d(t,{Z:()=>l});var a=s(7313),n=s(4755),o=s(6230),i=s(6417);class r extends a.PureComponent{constructor(e){super(e),this.onChange=e=>{const{value:t}=e;let s=t;const{multiselect:a,valueField:n,field:o}=this.props;n&&"object"===typeof t&&(s=a?t.map((e=>e[n])):t[n]),this.setState({value:t,subValue:s}),this.props.onChange(s,o)},this.state=r.getDerivedStateFromProps(e,{})||{}}static getDerivedStateFromProps(e,t){const{valueField:s,multiselect:a,group:n}=e;let{value:o=null,dataset:i}=e,{subValue:r}=t,l={};if(n&&i!==t.dataset){l=l||{},l.dataset=i;const t=[];i.forEach((s=>{const a={isGroup:!0,value:s};e.displayField&&(a[e.displayField]=""),t.push(a),s.items.forEach((e=>t.push(e)))})),l.groupedDataset=t,i=t}return o!==r&&(r=o,(o||!a&&""===o)&&s&&"object"===typeof o?o=a?i.filter((e=>o.indexOf(e[s])>=0)):i.filter((e=>e[s]===o))[0]:s&&"value"!==s&&"object"!==typeof o&&"object"===typeof i[0]&&(a||(o=i.first((e=>e[s]===o))||o)),l.subValue=r,l.value=o),l}render(){const{props:{displayField:e="label",placeholder:t,multiselect:s,style:a,className:r,filterPlaceholder:l,group:c,children:h,dataKey:d},state:{value:u,groupedDataset:p}}=this;let{dataset:m}=this.props,g=null;c&&(m=p,g=(e,t)=>e.isGroup?h[1](e.value,t):h[0](e,t));const f=m&&m.length>=15;return s?(0,i.jsx)(o.MultiSelect,{appendTo:document.body,value:u,optionLabel:e,options:m,filter:f,onChange:this.setValue,placeholder:t}):(0,i.jsx)(n.Dropdown,{appendTo:document.body,value:u,dataKey:d,optionLabel:e,options:m,filter:f,style:a,className:r,onChange:this.onChange,placeholder:t,filterPlaceholder:l,itemTemplate:g})}}const l=r},2544:(e,t,s)=>{s.d(t,{Z:()=>l});var a=s(7313),n=s(7220),o=s(9094),i=s(6417);class r extends a.PureComponent{constructor(e){super(e),this.onChange=e=>{const{filter:t,onChange:s,readOnly:a,field:n,args:o}=this.props;if(!0===a)return;const{value:i}=this.state;let{target:{value:r}}=e;t&&(r=i),this.setState({value:r}),s(r,n,o)},this.keyPress=e=>{const{key:t}=e;if(t&&t.length>1){const e=this.props[`onKey_${t}`];e&&e(this.state.value)}const{onKeyDown:s}=this.props;s&&s(e)},this.state={value:e.value||""}}UNSAFE_componentWillReceiveProps(e){let{value:t}=e;t||(t=""),t!==this.state.value&&this.setState({value:t})}render(){const{value:e}=this.state,{keyfilter:t,style:s,className:a,maxLength:r,placeholder:l,multiline:c,rows:h,autoResize:d,readOnly:u,disabled:p,autoFocus:m}=this.props;return c?(0,i.jsx)(o.InputTextarea,{rows:h,value:e,autoResize:d,keyfilter:t,style:s,maxLength:r,disabled:p,className:`w-p-100 ${a||""}`,placeholder:l,onChange:this.onChange,onKeyPress:this.keyPress,onBlur:this.props.onBlur}):(0,i.jsx)(n.InputText,{value:e,keyfilter:t,style:s,maxLength:r,className:a,placeholder:l,onChange:this.onChange,onKeyDown:this.keyPress,readOnly:u,disabled:p,onBlur:this.props.onBlur,autoFocus:m})}}const l=r},9422:(e,t,s)=>{s.d(t,{Qc:()=>r,zx:()=>l.Z,XZ:()=>u,zH:()=>f,Mt:()=>v.ZP,Ee:()=>C,yh:()=>P,EU:()=>S,jL:()=>w.Z,zC:()=>m.Z});var a=s(7313),n=s(8649),o=s(6417);class i extends a.PureComponent{constructor(e){super(e),this.onChange=e=>{let{value:t}=e;this.setState({value:t});const{onChange:s}=this.props;s&&s(t,this.props.field)},this.filterResult=e=>{let{query:t}=e;const{dataset:s}=this.props;if("function"===typeof s){const e=s(t);if(Array.isArray(e))return void this.setState({list:e});"function"===typeof e.then&&e.then((e=>this.setState({list:e})))}},this.onKeyUp=e=>{const{currentTarget:t,keyCode:s}=e,{onCustomValue:a,onKeyUp:n}=this.props;if(13===s){a(t.value.trim())}n&&n(e)};let{value:t}=e;t=t||"",this.state={value:t}}UNSAFE_componentWillReceiveProps(e){this.state.value!==e.value&&this.setState({value:e.value})}render(){const{onChange:e,filterResult:t,props:{multiple:s,dropdown:a,displayField:i,children:r,placeholder:l,title:c,className:h,style:d,size:u,maxLength:p,scrollHeight:m,disabled:g,onCustomValue:f,autoFocus:v,onKeyUp:y,onFocus:x,onBlur:b,onSelect:C,onShow:w,onHide:j},state:{value:k,list:D}}=this;return(0,o.jsx)(n.AutoComplete,{appendTo:document.body,multiple:s,itemTemplate:r,dropdown:a,field:i,placeholder:l,tooltip:c,className:h,style:d,size:u,maxlength:p,scrollHeight:m,disabled:g,value:k,onChange:e,suggestions:D,completeMethod:t,autoFocus:v,onKeyUp:f?this.onKeyUp:y,onFocus:x,onBlur:b,onSelect:C,onShow:w,onHide:j})}}const r=i;var l=s(9168),c=s(6281);let h=0;class d extends a.PureComponent{constructor(e){super(e),this.onChange=e=>{const{onChange:t,field:s,args:a}=this.props;t&&t(e.checked,s,a)},this.inputId=e.inputId||(e.label?"chk_"+ ++h:null)}render(){const{inputId:e,onChange:t,onClick:s,props:{className:a="",checked:n=!1,label:i,disabled:r,title:l}}=this;return(0,o.jsxs)("span",{className:`span-cb ${a}`,children:[(0,o.jsx)(c.Checkbox,{inputId:e,onChange:t,checked:n,disabled:r,onClick:s,tooltip:l,tooltipOptions:{appendTo:document.body,position:"top"}}),i&&(0,o.jsx)("label",{htmlFor:e,className:"chk-label",children:i})]})}}const u=d;var p=s(6535),m=s(2544);class g extends a.PureComponent{constructor(){super(...arguments),this.onChange=e=>this.colorTextChanged(e.value),this.colorTextChanged=e=>{const{onChange:t,fieldName:s}=this.props;e&&!e.startsWith("#")&&(e=`#${e}`),t(e,s)}}render(){const{disabled:e}=this.props;let{value:t=""}=this.props;return t&&t.startsWith("#")&&(t=t.substring(1)),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(p.z,{format:"hex",appendTo:document.body,disabled:e,value:t,onChange:this.onChange}),(0,o.jsx)(m.Z,{value:`#${t||""}`,onChange:this.colorTextChanged})]})}}const f=g;var v=s(7656),y=s(6123),x=s.n(y);class b extends a.PureComponent{render(){const{src:e}=this.props;if(!e||function(e){try{return new URL(e).pathname}catch(t){console.warn("Invalid URL Passed: ",e,t)}return""}(e).length<3)return null;const{alt:t="",className:s,title:a}=this.props;return(0,o.jsx)("img",{src:e,alt:t,title:a,className:x()("img-x16",s)})}}const C=b;var w=s(1270),j=s(8774);let k=0;class D extends a.PureComponent{constructor(e){super(e),this.onChange=e=>{const{defaultValue:t}=this.props;this.props.onChange(t)},this.inputId=e.inputId||(e.label?"rdo_"+ ++k:null)}render(){const{inputId:e,onChange:t,props:{name:s,value:a,defaultValue:n,className:i,label:r,title:l,disabled:c}}=this,h=n===a;return(0,o.jsxs)("span",{className:`ja-radio ${i||""}`,title:l,children:[(0,o.jsx)(j.RadioButton,{inputId:e,name:s,onChange:t,checked:h,disabled:c}),r&&(0,o.jsx)("label",{htmlFor:e,children:r})]})}}const S=D;var F=s(8362);class N extends a.PureComponent{constructor(){super(...arguments),this.valueChanged=e=>{this.props.onChange(e.value)},this.onBlur=e=>{var t;const s=null===(t=e.currentTarget.value)||void 0===t?void 0:t.trim().toUpperCase();if(!s||s.length<4)return;let{props:{value:a}}=this;a=a||[],a.some((e=>e.toUpperCase()===s))||(a=[...a,s],e.currentTarget.value="",this.props.onChange(a))}}render(){const{props:{value:e,placeholder:t}}=this;return(0,o.jsx)(F.Chips,{value:e,onChange:this.valueChanged,placeholder:t,onBlur:this.onBlur,separator:","})}}const P=N},5863:(e,t,s)=>{s.d(t,{Z:()=>l});var a=s(7313),n=s(9970),o=s(4616),i=s(6417);class r extends a.PureComponent{constructor(e){super(e),this.setFileSelector=e=>this.fileSelector=e,this.chooseFileForImport=e=>this.fileSelector.click(),this.fileSelected=()=>{const e=this.fileSelector,t=e.files[0];if(t){if(!t.name.endsWith(".jab"))return this.$message.warning("Unknown file selected to import. Select a valid Jira Assist Backup (*.jab) file"),void(e.value="");const s=new FileReader;s.readAsText(t,"UTF-8"),s.onload=async e=>{const t=e.target.result;try{const e=(0,n.Pe)(t);await this.$backup.importData(e),this.$message.success("Settings imported successfully")}catch(s){this.$message.error("Selected file is invalid or is corrupted")}},s.onerror=e=>{this.$message.error("Selected file is invalid or is corrupted. Unable to load the file!")}}else this.$message.warning("Import operation cancelled");e.value=""},(0,o.f3)(this,"BackupService","MessageService"),this.state={}}render(){return(0,i.jsxs)(i.Fragment,{children:[this.props.children(this.chooseFileForImport),(0,i.jsx)("input",{ref:this.setFileSelector,type:"file",className:"hide",accept:".jab",onChange:this.fileSelected})]})}}const l=r},7690:(e,t,s)=>{s.r(t),s.d(t,{default:()=>m});var a=s(7313),n=s(747),o=s(6088),i=s(9422),r=s(3682),l=s(108),c=s(5863),h=s(2284),d=s(6417);const u={fontSize:"18px",position:"absolute",right:"20px",top:"35px"};class p extends a.PureComponent{constructor(e){super(e),this.showMenu=e=>(0,n.showContextMenu)(e,this.settingsMenu),this.setUploader=e=>{this.importSettings=e},this.integrate=()=>{const e=this.state.jiraUrl.trim().clearEnd("/").clearEnd("\\");this.setState({jiraUrl:e}),this.$session.rootUrl=e,this.setState({isLoading:!0}),this.$ajax.get(l.F.mySelf).then((t=>this.$user.createUser(t,e).then(this.openDashboard,this.handleDBError)),(e=>{401===(e=e||{}).status?this.$message.warning("You are not authenticated with Jira to integrate.","Unauthorized"):this.$message.error("This is not a valid Jira server url or the server does not respond.","Unknown server")})).then((()=>this.setState({isLoading:!1})))},this.handleDBError=e=>(this.$message.error("Unable to save the changes. Verify if you have sufficient free space in your drive","Allocation failed"),-1),this.openDashboard=async e=>{e<=0||(await this.$settings.set("CurrentJiraUrl",this.state.jiraUrl),await this.$settings.set("CurrentUserId",e),this.$jaBrowserExtn.openTab("/index.html"),window.close())},(0,o.f3)(this,"AjaxService","StorageService","MessageService","SettingsService","AppBrowserService","SessionService","SettingsService","UserService"),this.year=(new Date).getFullYear(),this.browser=navigator.userAgent,this.state={},this.init()}async init(){this.settingsMenu=[{label:"Import Settings",icon:"fa fa-upload fs-16 margin-r-5",command:this.importBackup.bind(this)},{separator:!0},{label:"Use Jira OAuth",icon:"fa fa-external-link fs-16 margin-r-5",command:this.useOAuth.bind(this)}],this.$jaBrowserExtn.getAppVersion().then((e=>this.setState({version:e}))),this.$jaBrowserExtn.getCurrentUrl().then((e=>{const t=this.getJiraRootUrl(e);t&&t.length>20&&t.startsWith("http")&&this.setState({jiraUrl:t})})),await this.$storage.untilInit(),console.log("Storage initialized")}importBackup(){this.importSettings&&this.importSettings()}useOAuth(){const e=(0,h.VM)({forWeb:!1,authType:"2"});window.open(e,"JAOAuth2Win"),window.close()}getJiraRootUrl(e){return e.replace(/^(.*\/\/[^/?#]*).*$/,"$1")}render(){const{integrate:e,version:t,browser:s,state:{jiraUrl:a,isLoading:o}}=this;return(0,d.jsx)("div",{className:"app flex-row align-items-center",children:(0,d.jsx)("div",{className:"container",children:(0,d.jsx)("div",{className:"row justify-content-center",children:(0,d.jsx)("div",{className:"col-md-6 no-padding no-margin",style:{maxWidth:480,minWidth:460},children:(0,d.jsxs)("div",{className:"card mx-4 no-padding no-margin",children:[(0,d.jsxs)("div",{className:"card-body p-4",children:[(0,d.jsx)(c.Z,{children:this.setUploader}),(0,d.jsx)(n.ContextMenu,{}),(0,d.jsx)("span",{className:"fa fa-cogs pull-right pointer",style:u,onClick:this.showMenu,onContextMenu:this.showMenu}),(0,d.jsx)("h1",{children:"Jira Assistant"}),(0,d.jsxs)("p",{className:"text-muted",children:[(0,d.jsx)("strong",{children:"Integrate"})," with your Jira account"]}),(0,d.jsxs)("div",{className:"input-group mb-3",children:[(0,d.jsx)("div",{className:"input-group-prepend",children:(0,d.jsx)("span",{className:"input-group-text",children:(0,d.jsx)("i",{className:"fa fa-external-link"})})}),(0,d.jsx)(i.zC,{className:"form-control",value:a,onChange:e=>this.setState({jiraUrl:e}),placeholder:"Jira url (eg: https://jira.example.com)"})]}),(0,d.jsx)("p",{className:"text-muted",children:"Login to your Jira in current tab or provide the Url of your Jira server to integrate. Ensure you have already been authenticated in Jira before you click on Integrate button."}),(0,d.jsx)(i.zx,{type:"success",className:"btn-block",icon:o?"fa fa-spinner fa-spin":"fa fa-unlock-alt",disabled:!a||o,onClick:e,label:"Integrate"})]}),(0,d.jsx)("div",{className:"card-footer p-4",children:(0,d.jsxs)("div",{className:"row",children:[(0,d.jsx)("div",{className:"col-6",children:(0,d.jsxs)("span",{children:["\xa9 ",this.year," Jira Assistant"]})}),(0,d.jsxs)("div",{className:"col-6",style:{textAlign:"right"},children:[(0,d.jsxs)("span",{children:[(0,d.jsx)("i",{className:"fa fa-youtube"}),(0,d.jsx)("a",{href:"https://www.youtube.com/embed/HsWq7cT3Qq0?rel=0&autoplay=1&showinfo=0&cc_load_policy=1",target:"_blank",rel:"noopener noreferrer",title:"Click to open youtube video guiding you to setup Jira Assistant",children:" Help setup"})]})," |",(0,d.jsxs)("span",{children:[(0,d.jsx)("i",{className:"fa fa-phone"}),(0,d.jsx)("a",{href:`${r.ky}?entry.1426640786=${t}&entry.972533768=${s}`,target:"_blank",rel:"noopener noreferrer",title:"Click to report about any issues or ask a question",children:" Contact us"})]})]})]})})]})})})})})}}const m=p}}]);