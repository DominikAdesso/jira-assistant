"use strict";(globalThis.webpackChunkjira_assistant=globalThis.webpackChunkjira_assistant||[]).push([[753],{9168:(e,t,s)=>{s.d(t,{Z:()=>l});var a=s(7313),n=s(3499),o=s(6417);const r={danger:"p-button-danger",success:"p-button-success",secondary:"p-button-secondary",warning:"p-button-warning",info:"p-button-info",primary:"",default:""};class i extends a.PureComponent{constructor(){super(...arguments),this.state={}}componentDidMount(){const{waitFor:e=0}=this.props;if(e>0){this.setState({waitFor:e});const t=setInterval((()=>{const{waitFor:e}=this.state;this.setState({waitFor:e-1}),e<=1&&clearInterval(t)}),1e3)}}render(){const{type:e,rounded:t,isLoading:s,icon:a,onClick:i,title:l,style:h}=this.props;let{className:c,disabled:d,label:u}=this.props;const{waitFor:p}=this.state;p>0&&(d=!0,u+=` (${p})`);let m=`rb-button ${r[e]||""}`;t&&(m+=" p-button-rounded "),u||(m+=" ui-button-icon-only "),c=c||"";const g={label:u,icon:a,onClick:i,disabled:d,title:l,style:h,className:`${m} ${c}`};return s&&(g.icon="fa fa-spinner fa-spin"),(0,o.jsx)(n.Button,{...g})}}const l=i},7656:(e,t,s)=>{s.d(t,{ZP:()=>y,dq:()=>g});var a=s(7313),n=s(3651),o=(s(4153),s(2544)),r=s(816),i=s.n(r),l=s(9168),h=s(7821),c=s(6123),d=s.n(c),u=s(6417);const p=["This month","Last one month","Last month","This week","Last one week","Last week"];function m(){return{"This month":[i()().startOf("month").toDate(),i()().endOf("month").toDate()],"Last one month":[i()().subtract(1,"months").toDate(),i()().toDate()],"Last month":[i()().subtract(1,"months").startOf("month").toDate(),i()().subtract(1,"months").endOf("month").toDate()],"This week":[i()().startOf("week").toDate(),i()().endOf("week").toDate()],"Last one week":[i()().subtract(6,"days").toDate(),i()().toDate()],"Last week":[i()().subtract(1,"weeks").startOf("week").toDate(),i()().subtract(1,"weeks").endOf("week").toDate()]}}function g(e,t){if(0===e||e>0){const s=m(),a=p[e],n=a&&s[a]||[];return t?n.map((e=>i()(e))):n}}class v extends a.PureComponent{constructor(e){super(e),this.onChange=(e,t)=>{var s,a;this.manuallyEdited=!1;const{range:n}=this.props;let o=t.startDate,r=null===(s=o)||void 0===s?void 0:s.toDate(),i="";if(n){const{chosenLabel:e,startDate:s,endDate:a}=t;if(s&&a){r={fromDate:s.toDate(),toDate:a.toDate()};const t=p.indexOf(e);t>=0&&(r.quickDate=t),i=`${s.format(this.displayFormat)} - ${a.format(this.displayFormat)}`,o=[r.fromDate,r.toDate]}}else null!==(a=o)&&void 0!==a&&a.isValid()&&(i=o.format(this.displayFormat));this.setState({value:o,displayDate:i}),this.props.onChange(r)},this.setDate=e=>{if(this.manuallyEdited){let{target:{value:t}}=e;if(t=t.trim(),!t&&!0===this.props.allowClear)return void this.onChange(null,{startDate:null});let s=i()(t,this.displayFormat);s.isValid()||(s=i()(t)),s.isValid()&&s.format(this.displayFormat)===t||(s=this.state.value),this.picker.setStartDate(s),this.picker.setEndDate(s),this.onChange(null,{startDate:s})}else null!==e&&void 0!==e&&e.currentTarget&&this.props.onBlur&&this.props.onBlur(e)},this.onKeyDown=e=>{const{keyCode:t}=e;13===t?this.setDate(e):this.props.onKeyDown&&(27===t&&(this.setDateFromProps(this.props),this.manuallyEdited=!1),this.props.onKeyDown(e))},this.dateEdited=e=>{this.manuallyEdited=!0},this.setPicker=e=>this.picker=e;const{value:t,range:s,showTime:a}=e;(0,h.f)(this,"SessionService");let n=this.$session.CurrentUser.timeFormat||" hh:mm tt";this.timePicker24Hour=-1===n.indexOf("tt"),n=n.replace("tt","A").replace(".ss","").replace(":ss",""),this.dateRange=m(),this.displayFormat=e.dateFormat||`DD-MMM-YYYY${a?n:""}`,this.state=this.getDateValue(t,s)}UNSAFE_componentWillReceiveProps(e){this.setDateFromProps(e)}setDateFromProps(e){const{value:t,range:s}=e;this.setState(this.getDateValue(t,s))}getDateValue(e,t){const s={displayDate:""};return e?t?"object"===typeof e&&(e=e.quickDate>=0?g(e.quickDate,!0):"object"===typeof e&&e.fromDate?[i()(e.fromDate),i()(e.toDate)||null]:[],s.value=e,e[0]&&e[1]&&(s.displayDate=`${e[0].format(this.displayFormat)} - ${e[1].format(this.displayFormat)}`)):(s.value=i()(e),s.displayDate=s.value.format(this.displayFormat)):t&&(s.value=[]),s}render(){const{onChange:e,props:{multiselect:t,range:s,disabled:a,style:r,className:i,autoFocus:h},state:{displayDate:c}}=this;let{placeholder:p}=this.props;return!0===t?p=p||"Select one or more date":!0===s&&(p=p||"Select a date range"),p=p||"Select a date",(0,u.jsx)("div",{className:d()("react-bootstrap-daterangepicker-container",i),children:(0,u.jsx)(n.Z,{ref:this.setPicker,style:r,className:i,disabled:a,initialSettings:this.getPickerSettings(),onApply:e,children:(0,u.jsxs)("span",{children:[(0,u.jsx)(o.Z,{className:"date-range-ctl",value:c,readOnly:s,placeholder:p,autoFocus:h,onChange:s?void 0:this.dateEdited,onBlur:s?void 0:this.setDate,onKeyDown:this.onKeyDown}),(0,u.jsx)(l.Z,{icon:"fa fa-calendar",className:"icon"})]})})})}getPickerSettings(){const{dateRange:e,props:{showTime:t,range:s},state:{value:a}}=this,n={showDropdowns:!0,timePicker:t||!1,alwaysShowCalendars:!1,maxSpan:6,autoApply:!0,linkedCalendars:!1,autoUpdateInput:!1};let o=null;return o=s?{...n,startDate:a[0],endDate:a[1],ranges:e,singleDatePicker:!1,showCustomRangeLabel:!0}:{...n,singleDatePicker:!0,startDate:a,endDate:a,timePicker24Hour:this.timePicker24Hour},o}}const y=v},1270:(e,t,s)=>{s.d(t,{Z:()=>l});var a=s(7313),n=s(4755),o=s(6230),r=s(6417);class i extends a.PureComponent{constructor(e){super(e),this.onChange=e=>{const{value:t}=e;let s=t;const{multiselect:a,valueField:n,field:o}=this.props;n&&"object"===typeof t&&(s=a?t.map((e=>e[n])):t[n]),this.setState({value:t,subValue:s}),this.props.onChange(s,o)},this.state=i.getDerivedStateFromProps(e,{})||{}}static getDerivedStateFromProps(e,t){const{valueField:s,multiselect:a,group:n}=e;let{value:o=null,dataset:r}=e,{subValue:i}=t,l={};if(n&&r!==t.dataset){l=l||{},l.dataset=r;const t=[];r.forEach((s=>{const a={isGroup:!0,value:s};e.displayField&&(a[e.displayField]=""),t.push(a),s.items.forEach((e=>t.push(e)))})),l.groupedDataset=t,r=t}return o!==i&&(i=o,(o||!a&&""===o)&&s&&"object"===typeof o?o=a?r.filter((e=>o.indexOf(e[s])>=0)):r.filter((e=>e[s]===o))[0]:s&&"value"!==s&&"object"!==typeof o&&"object"===typeof r[0]&&(a||(o=r.first((e=>e[s]===o))||o)),l.subValue=i,l.value=o),l}render(){const{props:{displayField:e="label",placeholder:t,multiselect:s,style:a,className:i,filterPlaceholder:l,group:h,children:c,dataKey:d},state:{value:u,groupedDataset:p}}=this;let{dataset:m}=this.props,g=null;h&&(m=p,g=(e,t)=>e.isGroup?c[1](e.value,t):c[0](e,t));const v=m&&m.length>=15;return s?(0,r.jsx)(o.MultiSelect,{appendTo:document.body,value:u,optionLabel:e,options:m,filter:v,onChange:this.setValue,placeholder:t}):(0,r.jsx)(n.Dropdown,{appendTo:document.body,value:u,dataKey:d,optionLabel:e,options:m,filter:v,style:a,className:i,onChange:this.onChange,placeholder:t,filterPlaceholder:l,itemTemplate:g})}}const l=i},2544:(e,t,s)=>{s.d(t,{Z:()=>l});var a=s(7313),n=s(7220),o=s(9094),r=s(6417);class i extends a.PureComponent{constructor(e){super(e),this.onChange=e=>{const{filter:t,onChange:s,readOnly:a,field:n,args:o}=this.props;if(!0===a)return;const{value:r}=this.state;let{target:{value:i}}=e;t&&(i=r),this.setState({value:i}),s(i,n,o)},this.keyPress=e=>{const{key:t}=e;if(t&&t.length>1){const e=this.props[`onKey_${t}`];e&&e(this.state.value)}const{onKeyDown:s}=this.props;s&&s(e)},this.state={value:e.value||""}}UNSAFE_componentWillReceiveProps(e){let{value:t}=e;t||(t=""),t!==this.state.value&&this.setState({value:t})}render(){const{value:e}=this.state,{keyfilter:t,style:s,className:a,maxLength:i,placeholder:l,multiline:h,rows:c,autoResize:d,readOnly:u,disabled:p,autoFocus:m}=this.props;return h?(0,r.jsx)(o.InputTextarea,{rows:c,value:e,autoResize:d,keyfilter:t,style:s,maxLength:i,disabled:p,className:`w-p-100 ${a||""}`,placeholder:l,onChange:this.onChange,onKeyPress:this.keyPress,onBlur:this.props.onBlur}):(0,r.jsx)(n.InputText,{value:e,keyfilter:t,style:s,maxLength:i,className:a,placeholder:l,onChange:this.onChange,onKeyDown:this.keyPress,readOnly:u,disabled:p,onBlur:this.props.onBlur,autoFocus:m})}}const l=i},9422:(e,t,s)=>{s.d(t,{Qc:()=>i,zx:()=>l.Z,XZ:()=>u,zH:()=>v,Mt:()=>y.ZP,Ee:()=>C,yh:()=>U,EU:()=>S,jL:()=>D.Z,zC:()=>m.Z});var a=s(7313),n=s(8649),o=s(6417);class r extends a.PureComponent{constructor(e){super(e),this.onChange=e=>{let{value:t}=e;this.setState({value:t});const{onChange:s}=this.props;s&&s(t,this.props.field)},this.filterResult=e=>{let{query:t}=e;const{dataset:s}=this.props;if("function"===typeof s){const e=s(t);if(Array.isArray(e))return void this.setState({list:e});"function"===typeof e.then&&e.then((e=>this.setState({list:e})))}},this.onKeyUp=e=>{const{currentTarget:t,keyCode:s}=e,{onCustomValue:a,onKeyUp:n}=this.props;if(13===s){a(t.value.trim())}n&&n(e)};let{value:t}=e;t=t||"",this.state={value:t}}UNSAFE_componentWillReceiveProps(e){this.state.value!==e.value&&this.setState({value:e.value})}render(){const{onChange:e,filterResult:t,props:{multiple:s,dropdown:a,displayField:r,children:i,placeholder:l,title:h,className:c,style:d,size:u,maxLength:p,scrollHeight:m,disabled:g,onCustomValue:v,autoFocus:y,onKeyUp:f,onFocus:x,onBlur:b,onSelect:C,onShow:D,onHide:w},state:{value:j,list:k}}=this;return(0,o.jsx)(n.AutoComplete,{appendTo:document.body,multiple:s,itemTemplate:i,dropdown:a,field:r,placeholder:l,tooltip:h,className:c,style:d,size:u,maxlength:p,scrollHeight:m,disabled:g,value:j,onChange:e,suggestions:k,completeMethod:t,autoFocus:y,onKeyUp:v?this.onKeyUp:f,onFocus:x,onBlur:b,onSelect:C,onShow:D,onHide:w})}}const i=r;var l=s(9168),h=s(6281);let c=0;class d extends a.PureComponent{constructor(e){super(e),this.onChange=e=>{const{onChange:t,field:s,args:a}=this.props;t&&t(e.checked,s,a)},this.inputId=e.inputId||(e.label?"chk_"+ ++c:null)}render(){const{inputId:e,onChange:t,onClick:s,props:{className:a="",checked:n=!1,label:r,disabled:i,title:l}}=this;return(0,o.jsxs)("span",{className:`span-cb ${a}`,children:[(0,o.jsx)(h.Checkbox,{inputId:e,onChange:t,checked:n,disabled:i,onClick:s,tooltip:l,tooltipOptions:{appendTo:document.body,position:"top"}}),r&&(0,o.jsx)("label",{htmlFor:e,className:"chk-label",children:r})]})}}const u=d;var p=s(6535),m=s(2544);class g extends a.PureComponent{constructor(){super(...arguments),this.onChange=e=>this.colorTextChanged(e.value),this.colorTextChanged=e=>{const{onChange:t,fieldName:s}=this.props;e&&!e.startsWith("#")&&(e=`#${e}`),t(e,s)}}render(){const{disabled:e}=this.props;let{value:t=""}=this.props;return t&&t.startsWith("#")&&(t=t.substring(1)),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(p.z,{format:"hex",appendTo:document.body,disabled:e,value:t,onChange:this.onChange}),(0,o.jsx)(m.Z,{value:`#${t||""}`,onChange:this.colorTextChanged})]})}}const v=g;var y=s(7656),f=s(6123),x=s.n(f);class b extends a.PureComponent{render(){const{src:e}=this.props;if(!e||function(e){try{return new URL(e).pathname}catch(t){console.warn("Invalid URL Passed: ",e,t)}return""}(e).length<3)return null;const{alt:t="",className:s,title:a}=this.props;return(0,o.jsx)("img",{src:e,alt:t,title:a,className:x()("img-x16",s)})}}const C=b;var D=s(1270),w=s(8774);let j=0;class k extends a.PureComponent{constructor(e){super(e),this.onChange=e=>{const{defaultValue:t}=this.props;this.props.onChange(t)},this.inputId=e.inputId||(e.label?"rdo_"+ ++j:null)}render(){const{inputId:e,onChange:t,props:{name:s,value:a,defaultValue:n,className:r,label:i,title:l,disabled:h}}=this,c=n===a;return(0,o.jsxs)("span",{className:`ja-radio ${r||""}`,title:l,children:[(0,o.jsx)(w.RadioButton,{inputId:e,name:s,onChange:t,checked:c,disabled:h}),i&&(0,o.jsx)("label",{htmlFor:e,children:i})]})}}const S=k;var F=s(8362);class N extends a.PureComponent{constructor(){super(...arguments),this.valueChanged=e=>{this.props.onChange(e.value)},this.onBlur=e=>{var t;const s=null===(t=e.currentTarget.value)||void 0===t?void 0:t.trim().toUpperCase();if(!s||s.length<4)return;let{props:{value:a}}=this;a=a||[],a.some((e=>e.toUpperCase()===s))||(a=[...a,s],e.currentTarget.value="",this.props.onChange(a))}}render(){const{props:{value:e,placeholder:t}}=this;return(0,o.jsx)(F.Chips,{value:e,onChange:this.valueChanged,placeholder:t,onBlur:this.onBlur,separator:","})}}const U=N},7690:(e,t,s)=>{s.r(t),s.d(t,{default:()=>d});var a=s(7313),n=s(7821),o=s(9422),r=s(3682),i=s(108),l=s(4711),h=s(6417);class c extends a.PureComponent{constructor(e){super(e),this.integrate=()=>{const e=this.state.jiraUrl.trim().clearEnd("/").clearEnd("\\");this.setState({jiraUrl:e}),this.$session.rootUrl=e,this.setState({isLoading:!0}),this.$ajax.get(i.F.mySelf).then((t=>{const s=(0,l.vW)(t),a=t.emailAddress;this.getUserFromDB(e,s,a).then((t=>{t?(t.jiraUrl=e,t.userId=s,t.email=a,t.lastLogin=new Date,this.$storage.addOrUpdateUser(t).then((()=>t.id),this.handleDBError).then(this.openDashboard)):(t={jiraUrl:e,userId:s,email:a,lastLogin:new Date,dateCreated:new Date},this.$storage.addUser(t).then((async e=>(await this.$settings.saveGeneralSetting(e,"dateFormat","dd-MMM-yyyy"),await this.$settings.saveGeneralSetting(e,"timeFormat"," hh:mm:ss tt"),await this.$settings.saveGeneralSetting(e,"maxHours",8),await this.$settings.saveGeneralSetting(e,"startOfDay","09:00"),await this.$settings.saveGeneralSetting(e,"endOfDay","17:00"),await this.$settings.saveGeneralSetting(e,"startOfWeek",1),await this.$settings.saveGeneralSetting(e,"maxHours",8),e)),this.handleDBError).then(this.openDashboard))}))}),(e=>{401===(e=e||{}).status?this.$message.warning("You are not authenticated with Jira to integrate.","Unauthorized"):this.$message.error("This is not a valid Jira server url or the server does not respond.","Unknown server")})).then((()=>{this.setState({isLoading:!1})}))},this.handleDBError=e=>(this.$message.error("Unable to save the changes. Verify if you have sufficient free space in your drive","Allocation failed"),-1),this.openDashboard=async e=>{e<=0||(await this.$settings.set("CurrentJiraUrl",this.state.jiraUrl),await this.$settings.set("CurrentUserId",e),this.$jaBrowserExtn.openTab("/index.html"),window.close())},(0,n.f)(this,"AjaxService","StorageService","MessageService","SettingsService","AppBrowserService","SessionService","SettingsService"),this.year=(new Date).getFullYear(),this.browser=navigator.userAgent,this.state={}}UNSAFE_componentWillMount(){this.$jaBrowserExtn.getAppVersion().then((e=>this.setState({version:e}))),this.$jaBrowserExtn.getCurrentUrl().then((e=>{const t=this.getJiraRootUrl(e);t&&t.length>20&&t.startsWith("http")&&this.setState({jiraUrl:t})}))}getJiraRootUrl(e){return e.replace(/^(.*\/\/[^/?#]*).*$/,"$1")}async getUserFromDB(e,t,s){let a=await this.$storage.getUserWithNameAndJiraUrl(t,e);return!a&&s&&(a=await this.$storage.getUserWithEmailAndJiraUrl(s,e)),a}render(){const{integrate:e,version:t,browser:s,state:{jiraUrl:a,isLoading:n}}=this;return(0,h.jsx)("div",{className:"app flex-row align-items-center",children:(0,h.jsx)("div",{className:"container",children:(0,h.jsx)("div",{className:"row justify-content-center",children:(0,h.jsx)("div",{className:"col-md-6 no-padding no-margin",style:{maxWidth:480,minWidth:460},children:(0,h.jsxs)("div",{className:"card mx-4 no-padding no-margin",children:[(0,h.jsxs)("div",{className:"card-body p-4",children:[(0,h.jsx)("h1",{children:"Jira Assistant"}),(0,h.jsxs)("p",{className:"text-muted",children:[(0,h.jsx)("strong",{children:"Integrate"})," with your Jira account"]}),(0,h.jsxs)("div",{className:"input-group mb-3",children:[(0,h.jsx)("div",{className:"input-group-prepend",children:(0,h.jsx)("span",{className:"input-group-text",children:(0,h.jsx)("i",{className:"fa fa-external-link"})})}),(0,h.jsx)(o.zC,{className:"form-control",value:a,onChange:e=>this.setState({jiraUrl:e}),placeholder:"Jira url (eg: https://jira.example.com)"})]}),(0,h.jsx)("p",{className:"text-muted",children:"Login to your Jira in current tab or provide the Url of your Jira server to integrate. Ensure you have already been authenticated in Jira before you click on Integrate button."}),(0,h.jsx)(o.zx,{type:"success",className:"btn-block",icon:n?"fa fa-spinner fa-spin":"fa fa-unlock-alt",disabled:!a||n,onClick:e,label:"Integrate"})]}),(0,h.jsx)("div",{className:"card-footer p-4",children:(0,h.jsxs)("div",{className:"row",children:[(0,h.jsx)("div",{className:"col-6",children:(0,h.jsxs)("span",{children:["\xa9 ",this.year," Jira Assistant"]})}),(0,h.jsxs)("div",{className:"col-6",style:{textAlign:"right"},children:[(0,h.jsxs)("span",{children:[(0,h.jsx)("i",{className:"fa fa-youtube"}),(0,h.jsx)("a",{href:"https://www.youtube.com/embed/HsWq7cT3Qq0?rel=0&autoplay=1&showinfo=0&cc_load_policy=1",target:"_blank",rel:"noopener noreferrer",title:"Click to open youtube video guiding you to setup Jira Assistant",children:" Help setup"})]})," |",(0,h.jsxs)("span",{children:[(0,h.jsx)("i",{className:"fa fa-phone"}),(0,h.jsx)("a",{href:`${r.ky}?entry.1426640786=${t}&entry.972533768=${s}`,target:"_blank",rel:"noopener noreferrer",title:"Click to report about any issues or ask a question",children:" Contact us"})]})]})]})})]})})})})})}}const d=c}}]);